{% extends 'base/base.html' %}

{% block title %}ویرایش پاسخ{% endblock title %}

{% block content %}
<form action="" method="post" enctype="multipart/form-data" class="container mt-3">
    {% csrf_token %}
    <label for="answer_description">متن پاسخ</label>
    <textarea id="answer_description" name="answer_description" class="quill-editor">{{ form.answer_description.value }}</textarea>
    <div id="editor-answer" style="min-height: 150px;"></div>
    <button class="btn btn-primary mt-2" type="submit">تغییر</button>
</form>
{% endblock content %}

{% block scripts %}
<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.7/quill.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const textarea = document.getElementById("answer_description");
    const editorDiv = document.getElementById("editor-answer");
    textarea.style.display = "none";

    const quill = new Quill(editorDiv, {
        theme: "snow",
        modules: { toolbar: [['bold','italic','underline'],['link','image'], [{list:'ordered'},{list:'bullet'}],['clean']] }
    });
    quill.root.innerHTML = textarea.value || '';
    quill.on("text-change", () => { textarea.value = quill.root.innerHTML; });
});
</script>
{% endblock scripts %}
