{% extends 'base/base.html' %}

{% block title %}ویرایش سوال{% endblock title %}

{% block content %}
<h2 class="mb-3">سوالت رو عوض کن!</h2>
<form action="" method="post" enctype="multipart/form-data" class="container mt-3">
    {% csrf_token %}
    <label for="question_description">متن سوال</label>
    <textarea id="question_description" name="question_description" class="quill-editor">{{ form.question_description.value }}</textarea>
    <div id="editor-question" style="min-height: 200px;"></div>
    {{ form.name|add_class:"form-control mb-3" }}
    {{ form.slug|add_class:"form-control mb-3" }}
    {{ form.help_image }}
    {{ form.categories }}
    <button type="submit" class="btn btn-success mt-2">تغییر سوال</button>
</form>
{% endblock content %}

{% block scripts %}
<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.7/quill.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const textarea = document.getElementById("question_description");
    const editorDiv = document.getElementById("editor-question");
    textarea.style.display = "none";

    const quill = new Quill(editorDiv, {
        theme: "snow",
        modules: { toolbar: [['bold','italic','underline'],['link','image'], [{list:'ordered'},{list:'bullet'}],['clean']] }
    });
    quill.root.innerHTML = textarea.value || '';
    quill.on("text-change", () => { textarea.value = quill.root.innerHTML; });
});
</script>
{% endblock scripts %}
