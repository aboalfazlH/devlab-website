openapi: 3.0.3

paths:
  /api/articles/:
    get:
      operationId: articles_list
      summary: دریافت جدیدترین مقالات
      parameters:
        - in: query
          name: count
          schema:
            type: integer
          description: تعداد مقالات مورد نیاز
          required: false
      tags:
        - articles
      responses:
        '200':
          description: لیست مقالات
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Article'

  /api/articles/{token}/write-article/:
    post:
      operationId: articles_write_article_create
      summary: نوشتن مقاله جدید
      parameters:
        - in: path
          name: token
          schema:
            type: string
          required: true
      tags:
        - articles
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ArticleCreateRequest'
            examples:
              sample:
                value:
                  title: "نمونه مقاله"
                  description: "توضیحات مقاله"
                  slug: "sample-article"
                  categories: [1, 2]
                  is_pin: false
                  is_active: true
      responses:
        '200':
          description: ایجاد موفق
          content:
            application/json:
              example:
                status: 200
                description: "Article 'نمونه مقاله' created successfully."
                article_id: 12
        '400':
          description: خطای ورودی
          content:
            application/json:
              example:
                status: 400
                errors:
                  title: ["This field is required."]

components:
  schemas:
    Article:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        description:
          type: string
        thumbnail:
          type: string
          format: uri
          nullable: true
        views:
          type: integer
        author:
          type: string
        write_date:
          type: string
          format: date-time
        is_pin:
          type: boolean
        is_active:
          type: boolean
        categories:
          type: string

    ArticleCreateRequest:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        slug:
          type: string
        thumbnail:
          type: string
          format: binary
          nullable: true
        categories:
          type: array
          items:
            type: integer
        is_pin:
          type: boolean
        is_active:
          type: boolean
      required:
        - title
        - slug
        - categories
